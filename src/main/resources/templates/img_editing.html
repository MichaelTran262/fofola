<html xmlns:th="http://www.w3.org/1999/xhtml">

<head lang="en">
    <th:block th:include="layout :: standard (page_title='Fofola')"></th:block>
    <th:block th:include="layout :: websocket"></th:block>
    <script src="/js/img_editing.js"></script>
</head>

<body>
<a id="home-image" href="/"><img src="img/home.png" width="100" height="100"></a>

<div class="container">
    <div class="white-rounded-back">
        <div class="panel-bar">
            <form class="form-inline" action="#">
                <label for="enter_uuid">UUID stránky</label>
                <input class="text" id="enter_uuid" type="text" size="30"/>
            </form>

            <form class="form-inline" action="#" enctype="multipart/form-data">
                <label id="load_button_label" for="load_button">Vyberte obrázek</label>
                <label id="load_button" class="btn btn-outline-secondary btn-light" for="enter_file">Vybrat</label>
                <input type="file" name="file" id="enter_file" style="width:0; visibility:hidden; display: none"/>
                <select name="datastreams" id="img_datastream" style="visibility:hidden; display: none">
                    <option value="IMG_THUMB" selected>THUMBNAIL</option>
                    <option value="IMG_FULL">FULL</option>
                </select>
                <button class="btn btn-outline-secondary btn-light" id="editing_submit"
                        type="submit" style="visibility:hidden; display: none">
                    Nastavit obrázek
                </button>
            </form>

            <div style="clear: both"></div>
        </div>
    </div>
</div>

<script>
    const file = document.getElementById('enter_file');
    const submitButton = document.getElementById('editing_submit');
    const loadButton = document.getElementById('load_button');
    const loadButtonLabel = document.getElementById('load_button_label')
    const dsSelector = document.getElementById('img_datastream')

    file.onchange = function(){
        var filePath = file.value;
        var allowedExtensions = /(\.jpg|\.jpeg)$/i;
        if(!allowedExtensions.exec(filePath)){
            alert('Please upload file having extensions .jpg or .jpeg!');
            file.value = '';
            return false;
        }
        hideElement(loadButton)
        hideElement(loadButtonLabel)
        showElement(submitButton)
        showElement(dsSelector)
    };
</script>
</body>
</html>
